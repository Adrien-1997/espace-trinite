<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Trouve ta salle id√©ale ‚Äì Assistant</title>
<style>
  /* --- Trigger button --- */
  #assistant-toggle {
    position: fixed;
    bottom: 24px;
    right: 24px;
    z-index: 999;
    background: linear-gradient(90deg, #007cf0, #00dfd8);
    color: #fff;
    border: none;
    border-radius: 50px;
    padding: 14px 22px;
    font-size: 1rem;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
    cursor: pointer;
  }
  /* --- Overlay --- */
  #assistant-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.55);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 998;
  }
  /* --- Modal --- */
  #assistant-modal {
    background: #fff;
    width: 90%;
    max-width: 480px;
    padding: 32px 28px;
    border-radius: 16px;
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
    font-family: system-ui, sans-serif;
    display: flex;
    flex-direction: column;
    gap: 24px;
  }
  #assistant-modal h3 {
    margin: 0;
    font-size: 1.6rem;
    color: #003973;
  }
  label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: #003973;
  }
  select, input[type="number"] {
    width: 100%;
    padding: 10px 12px;
    border: 1px solid #ccc;
    border-radius: 8px;
    font-size: 1rem;
  }
  .form-row {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }
  .actions {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
  }
  .btn {
    padding: 10px 18px;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: 600;
  }
  .btn-primary {
    background: linear-gradient(90deg, #007cf0, #00dfd8);
    color: #fff;
  }
  .btn-secondary {
    background: #e5e5e5;
  }
  #assistant-result {
    background: #f4f8ff;
    padding: 16px;
    border-radius: 12px;
    font-size: 0.95rem;
    line-height: 1.5;
  }
</style>
</head>
<body>
<button id="assistant-toggle">Trouver ma salle üß≠</button>
<div id="assistant-overlay">
  <div id="assistant-modal">
    <h3>Trouve ta salle id√©ale</h3>
    <div id="assistant-form">
      <div class="form-row">
        <label for="eventType">Type d'√©v√©nement</label>
        <select id="eventType" required>
          <option value="reunion">R√©union / Atelier</option>
          <option value="conference">Conf√©rence / Pr√©sentation</option>
          <option value="cocktail">Cocktail / R√©ception</option>
        </select>
      </div>
      <div class="form-row">
        <label for="participants">Nombre de participants</label>
        <input type="number" id="participants" min="1" max="100" value="20" />
      </div>
      <div class="form-row">
        <label for="duration">Dur√©e</label>
        <select id="duration" required>
          <option value="demi">Demi‚Äëjourn√©e</option>
          <option value="journee">Journ√©e</option>
          <option value="soiree">Soir√©e</option>
        </select>
      </div>
      <div class="form-row" style="flex-direction:row;align-items:center;gap:8px;">
        <input type="checkbox" id="pmr" />
        <label for="pmr" style="margin:0;">Accessible PMR</label>
      </div>
    </div>
    <div id="assistant-result" style="display:none;"></div>
    <div class="actions">
      <button class="btn btn-secondary" id="assistant-cancel">Annuler</button>
      <button class="btn btn-primary" id="assistant-submit">Voir la recommandation</button>
    </div>
  </div>
</div>

<script>
  // Dataset simplifi√© des salles
  const rooms = [
    {
      name: "Salle La Bruy√®re",
      capacity: 40,
      min: 10,
      eventTypes: ["reunion", "conference"],
      pmr: true,
      pricing: { demi: 485, journee: 660, soiree: null }
    },
    {
      name: "Salle Pierre Goursat",
      capacity: 25,
      min: 8,
      eventTypes: ["reunion", "cocktail"],
      pmr: true,
      pricing: { demi: 365, journee: 510, soiree: 448 }
    },
    {
      name: "Salle Estienne d'Orves",
      capacity: 20,
      min: 5,
      eventTypes: ["reunion"],
      pmr: true,
      pricing: { demi: 340, journee: 490, soiree: null }
    },
    {
      name: "Salle Olivier Messiaen",
      capacity: 60,
      min: 20,
      eventTypes: ["conference", "cocktail"],
      pmr: false,
      pricing: { demi: 460, journee: 620, soiree: null }
    }
  ];

  const toggleBtn   = document.getElementById("assistant-toggle");
  const overlay     = document.getElementById("assistant-overlay");
  const cancelBtn   = document.getElementById("assistant-cancel");
  const submitBtn   = document.getElementById("assistant-submit");
  const resultBlock = document.getElementById("assistant-result");

  const eventType   = document.getElementById("eventType");
  const participants= document.getElementById("participants");
  const duration    = document.getElementById("duration");
  const pmrCheck    = document.getElementById("pmr");

  function openAssistant() {
    overlay.style.display = "flex";
    resultBlock.style.display = "none";
  }
  function closeAssistant() {
    overlay.style.display = "none";
  }

  toggleBtn.addEventListener("click", openAssistant);
  cancelBtn.addEventListener("click", closeAssistant);
  overlay.addEventListener("click", (e) => {
    if (e.target === overlay) closeAssistant();
  });

  function suggestRoom() {
    const type = eventType.value;
    const nb   = parseInt(participants.value, 10) || 0;
    const dur  = duration.value;
    const wantPMR = pmrCheck.checked;

    // Filtrage des salles
    const matches = rooms.filter(r =>
      r.eventTypes.includes(type) &&
      nb >= r.min && nb <= r.capacity &&
      (!wantPMR || r.pmr)
    );

    if (matches.length === 0) {
      resultBlock.innerHTML = "Aucune salle ne correspond exactement √† votre besoin. Contactez‚Äënous pour une solution sur mesure.";
    } else {
      // Choisir la salle la plus proche de la capacit√© demand√©e
      matches.sort((a,b) => (a.capacity - nb) - (b.capacity - nb));
      const best = matches[0];
      const price = best.pricing[dur] ? best.pricing[dur] + "¬†‚Ç¨ HT" : "sur devis";
      const priceText = dur === "soiree" && !best.pricing[dur] ? "(soir√©e sur devis)" : price;
      resultBlock.innerHTML = `\
        <strong>${best.name}</strong><br>
        Capacit√©&nbsp;: jusqu‚Äô√† ${best.capacity} pers.<br>
        Tarif ${dur === "demi" ? "demi‚Äëjourn√©e" : dur === "journee" ? "journ√©e" : "soir√©e"}&nbsp;: <strong>${priceText}</strong><br><br>
        <a href="#contact" class="btn btn-primary" style="display:inline-block;text-decoration:none;margin-top:8px;">Demander un devis</a>
      `;
    }
    resultBlock.style.display = "block";
  }

  submitBtn.addEventListener("click", suggestRoom);
</script>
</body>
</html>
